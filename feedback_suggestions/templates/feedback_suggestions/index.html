{% extends 'base.html' %}

{% block title %}Feedback & Suggestions - Portfolio{% endblock %}

{% block style %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    .carousel-item {
        min-height: 80vh; /* Altura do item do carrossel */
        display: flex;
        justify-content: center;
                transition: transform 0.8s ease-in-out;
                overflow: hidden;


    }
    .card {
        width: 100%; /* Preenche a largura do contêiner */
        height: 100%; /* Garante que os cartões preencham a altura do item */
        max-width: 350px; /* Ajuste o valor para aumentar ou diminuir o tamanho do card */
    }
    .card-body {
        overflow-y: auto;
        min-height: 60vh;
        max-height: 65vh;
        max-width: 65vh;
        min-width: 37vh;
    }
</style>
{% endblock %}

{% block content %}
<div class="d-flex flex-column justify-content-center align-items-center p-3 my-3" style="background-color: #e5dac8; max-width: 95%; margin: auto; height: 90.5vh;">    
    <h1>Feedback & Suggestions</h1>
    <p>Total de feedbacks: {{ feedback_batches|length }}</p>

    <!-- Carrossel de Feedbacks com Múltiplos Itens -->
    <div id="feedbackCarousel" class="carousel slide" data-ride="carousel" data-interval="false" style="min-width: -webkit-fill-available;">
        <div class="carousel-inner">
            {% for feedback_batch in feedback_batches %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="row" style="justify-content: center;">
                        {% for feedback in feedback_batch %}
                            <div class=" align-items-stretch">
                                <div class="card shadow-sm w-100">
                                    <div class="card-body w-100" style="">
                                        <h5 class="card-title">{{ feedback.user.username }}</h5>
                                        <h6 class="card-subtitle mb-2 text-muted">{{ feedback.date|date:"F j, Y" }}</h6>
                                        <h6 class="card-subtitle mb-2 text-muted">{{ feedback.type }}:</h6>
                                        <p class="card-text">{{ feedback.message }}</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <a class="carousel-control-prev" href="#feedbackCarousel" role="button" data-slide="prev" aria-label="Previous feedback">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#feedbackCarousel" role="button" data-slide="next" aria-label="Next feedback">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>


<script>
    $('#feedbackCarousel').carousel({
        interval: false // Desativa rotação automática
    });
</script>
{% endblock %}
